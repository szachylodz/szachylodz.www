(function(e){"use strict";function i(n,r,i){n[t].setContent(e.serializeFENShortcodeContent(r,i))}function s(s){var o=s[t].getRng();o[n]!==o.endContainer&&s[t].collapse();var u=o[n],a=u.textContent,f=o.startOffset,l=o.endOffset,c=0<=f&&f<=l&&l<=a.length?e.identifyFENShortcodeContent(a,f,l):null,h=function(e,t){i(s,e,t)};c===null?e[r](h):(o.setStart(u,c.beginShortcode),o.setEnd(u,c.endShortcode),e[r]({fen:c.fen,options:c.options,callback:h}))}var t="selection",n="startContainer",r="showEditFENDialog";if(typeof tinymce=="undefined")return;tinymce.PluginManager.add("RPBChessboard",function(t,n){t.addButton("rpb-chessboard",{title:e.i18n.EDIT_CHESS_DIAGRAM_DIALOG_TITLE,image:n+"/../images/tinymce.png",onclick:function(){s(t)}})})})(RPBChessboard);