var RPBChessboard={};(function(e,t){"use strict";function ot(e){if(typeof e=="boolean")return e;if(typeof e!="string")return L;switch(e.toLowerCase()){case"true":case"yes":case"1":return B;case"false":case"no":case"0":return A;default:return L}}function ht(e,n,r){at<ut[U]&&(ut=ut.slice(0,at)),ut.push({callback:e,undoValue:n,redoValue:r}),++at,t(l)[d](P),t(f)[d](O)}function pt(){ut=[],at=0,t(l)[d](O),t(f)[d](O)}function dt(){if(at===0)return;--at,mt(ut[at][I],ut[at].undoValue),t(l)[d](at===0?O:P),t(f)[d](P)}function vt(){if(at===ut[U])return;mt(ut[at][I],ut[at].redoValue),++at,t(l)[d](P),t(f)[d](at===ut[U]?O:P)}function mt(e,t){ft=B,e(t),ft=A}function gt(e){var n=t(u),i=n[r](a,x);t(D+i)[j](h,A)[d](X),typeof e=="undefined"||e===i?n[r](a,x,q):(n[r](a,x,e),t(D+e)[j](h,B)[d](X))}function yt(e){var n=t(u);n[r](a,Y,e),t("#rpbchessboard-editFENDialog-turn-"+n[r]("turn"))[j](h,B),t(S)[d](X),t("#rpbchessboard-editFENDialog-castle-wk")[j](h,n[r](b,"w","k")),t("#rpbchessboard-editFENDialog-castle-wq")[j](h,n[r](b,"w","q")),t("#rpbchessboard-editFENDialog-castle-bk")[j](h,n[r](b,"b","k")),t("#rpbchessboard-editFENDialog-castle-bq")[j](h,n[r](b,"b","q"));var i=n[r](z);t("#rpbchessboard-editFENDialog-enPassant-"+(i==="-"?H:"enabled"))[j](h,B),t(c)[j](H,i==="-"),i!=="-"&&t(c).val(i)}function bt(n,i,s){ft=B;var o=t(u);yt(n);if(typeof s===J&&s!==L){var f=M in s?ot(s[M]):L;f===L&&(f=A),o[r](a,M,f),t(v)[j](h,f),o[r](a,m,"csl"in s?s.csl:""),o[r](a,w,"cal"in s?s.cal:"")}else o[r](a,m,""),o[r](a,w,"");gt(),pt(),t("#rpbchessboard-editFENDialog-submitButton")[d](a,"label",i?e[g].SUBMIT_BUTTON_ADD_LABEL:e[g].SUBMIT_BUTTON_EDIT_LABEL),ft=A}function wt(){if(t(p)[U]!==0)return;t("body").append('<div id="rpbchessboard-editFENDialog"><div class="rpbchessboard-columns"><div style="min-width:425px;">'+y+'<div class="rpbchessboard-toolbar uichess-chessboard-size30">'+'<div id="rpbchessboard-editFENDialog-addPiecesSelector" class="rpbchessboard-buttonSet">'+s+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-wp" name="interactionMode" value="addPieces-wp" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-wn" name="interactionMode" value="addPieces-wn" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-wb" name="interactionMode" value="addPieces-wb" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-wr" name="interactionMode" value="addPieces-wr" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-wq" name="interactionMode" value="addPieces-wq" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-wk" name="interactionMode" value="addPieces-wk" />'+'<label for="rpbchessboard-editFENDialog-addPieces-wp" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-w uichess-chessboard-piece-p"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-wn" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-w uichess-chessboard-piece-n"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-wb" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-w uichess-chessboard-piece-b"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-wr" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-w uichess-chessboard-piece-r"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-wq" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-w uichess-chessboard-piece-q"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-wk" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-w uichess-chessboard-piece-k"></div></label>'+n+s+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-bp" name="interactionMode" value="addPieces-bp" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-bn" name="interactionMode" value="addPieces-bn" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-bb" name="interactionMode" value="addPieces-bb" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-br" name="interactionMode" value="addPieces-br" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-bq" name="interactionMode" value="addPieces-bq" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addPieces-bk" name="interactionMode" value="addPieces-bk" />'+'<label for="rpbchessboard-editFENDialog-addPieces-bp" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-b uichess-chessboard-piece-p"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-bn" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-b uichess-chessboard-piece-n"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-bb" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-b uichess-chessboard-piece-b"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-br" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-b uichess-chessboard-piece-r"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-bq" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-b uichess-chessboard-piece-q"></div></label>'+'<label for="rpbchessboard-editFENDialog-addPieces-bk" class="rpbchessboard-graphicButton"><div class="uichess-chessboard-sized uichess-chessboard-color-b uichess-chessboard-piece-k"></div></label>'+n+n+'<div id="rpbchessboard-editFENDialog-turnSelector" class="rpbchessboard-buttonSet">'+s+'<input type="radio" id="rpbchessboard-editFENDialog-turn-w" name="turn" value="w" />'+'<label for="rpbchessboard-editFENDialog-turn-w" class="rpbchessboard-graphicButton">'+'<div class="uichess-chessboard-sized uichess-chessboard-color-w uichess-chessboard-turnFlag"></div>'+C+n+s+'<input type="radio" id="rpbchessboard-editFENDialog-turn-b" name="turn" value="b" />'+'<label for="rpbchessboard-editFENDialog-turn-b" class="rpbchessboard-graphicButton">'+'<div class="uichess-chessboard-sized uichess-chessboard-color-b uichess-chessboard-turnFlag"></div>'+C+n+n+'<div class="rpbchessboard-toolbarGroup">'+_+'<button id="rpbchessboard-editFENDialog-undo" class="rpbchessboard-graphicButton" title="'+e[g].UNDO_TOOLTIP+V+'<div class="rpbchessboard-undoIcon"></div>'+E+'<button id="rpbchessboard-editFENDialog-redo" class="rpbchessboard-graphicButton" title="'+e[g].REDO_TOOLTIP+V+'<div class="rpbchessboard-redoIcon"></div>'+E+n+'<div id="rpbchessboard-editFENDialog-flipSelector">'+'<input id="rpbchessboard-editFENDialog-flip" type="checkbox" />'+'<label for="rpbchessboard-editFENDialog-flip">'+e[g].FLIP_CHECKBOX_LABEL+C+n+n+n+n+'<div id="rpbchessboard-editFENDialog-chessboard"></div>'+n+'<div class="rpbchessboard-stretchable">'+y+'<div id="rpbchessboard-editFENDialog-accordion">'+$+e[g].STANDARD_POSITIONS_TAB_LABEL+W+_+'<div class="rpbchessboard-editFENDialog-buttonColumn">'+_+'<button id="rpbchessboard-editFENDialog-startPosition" class="rpbchessboard-graphicButton" title="'+e[g].START_POSITION_TOOLTIP+V+'<div class="rpbchessboard-startPositionIcon"></div>'+E+"</div><div>"+'<button id="rpbchessboard-editFENDialog-emptyPosition" class="rpbchessboard-graphicButton" title="'+e[g].EMPTY_POSITION_TOOLTIP+V+'<div class="rpbchessboard-emptyPositionIcon"></div>'+E+n+n+n+$+e[g].ANNOTATIONS_TAB_LABEL+W+_+o+e[g].SQUARE_MARKERS_SECTION_TITLE+n+i+k+'<div id="rpbchessboard-editFENDialog-addSquareMarkersSelector" class="rpbchessboard-buttonSet">'+s+'<input type="checkbox" id="rpbchessboard-editFENDialog-addSquareMarkers-G" name="interactionMode" value="addSquareMarkers-G" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addSquareMarkers-R" name="interactionMode" value="addSquareMarkers-R" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addSquareMarkers-Y" name="interactionMode" value="addSquareMarkers-Y" />'+'<label for="rpbchessboard-editFENDialog-addSquareMarkers-G" class="rpbchessboard-graphicButton"><div class="rpbchessboard-squareMarkerGreenIcon"></div></label>'+'<label for="rpbchessboard-editFENDialog-addSquareMarkers-R" class="rpbchessboard-graphicButton"><div class="rpbchessboard-squareMarkerRedIcon"></div></label>'+'<label for="rpbchessboard-editFENDialog-addSquareMarkers-Y" class="rpbchessboard-graphicButton"><div class="rpbchessboard-squareMarkerYellowIcon"></div></label>'+n+n+'<button id="rpbchessboard-editFENDialog-deleteSquareMarkers" class="rpbchessboard-graphicButton" title="'+e[g].DELETE_SQUARE_MARKERS_TOOLTIP+V+T+E+n+n+o+e[g].ARROW_MARKERS_SECTION_TITLE+n+i+k+'<div id="rpbchessboard-editFENDialog-addArrowMarkersSelector" class="rpbchessboard-buttonSet">'+s+'<input type="checkbox" id="rpbchessboard-editFENDialog-addArrowMarkers-G" name="interactionMode" value="addArrowMarkers-G" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addArrowMarkers-R" name="interactionMode" value="addArrowMarkers-R" />'+'<input type="checkbox" id="rpbchessboard-editFENDialog-addArrowMarkers-Y" name="interactionMode" value="addArrowMarkers-Y" />'+'<label for="rpbchessboard-editFENDialog-addArrowMarkers-G" class="rpbchessboard-graphicButton"><div class="rpbchessboard-arrowMarkerGreenIcon"></div></label>'+'<label for="rpbchessboard-editFENDialog-addArrowMarkers-R" class="rpbchessboard-graphicButton"><div class="rpbchessboard-arrowMarkerRedIcon"></div></label>'+'<label for="rpbchessboard-editFENDialog-addArrowMarkers-Y" class="rpbchessboard-graphicButton"><div class="rpbchessboard-arrowMarkerYellowIcon"></div></label>'+n+n+'<button id="rpbchessboard-editFENDialog-deleteArrowMarkers" class="rpbchessboard-graphicButton" title="'+e[g].DELETE_ARROW_MARKERS_TOOLTIP+V+T+E+n+n+n+$+e[g].ADVANCED_TAB_LABEL+W+_+o+e[g].CASTLING_SECTION_TITLE+n+i+'<table id="rpbchessboard-editFENDialog-castleRights" class="uichess-chessboard-size28"><tbody>'+tt+"<td></td>"+"<td>O-O-O</td>"+"<td>O-O</td>"+Z+tt+'<td><span class="rpbchessboard-editFENDialog-turnFlag uichess-chessboard-turnFlag uichess-chessboard-color-b uichess-chessboard-sized"></span></td>'+'<td><input id="rpbchessboard-editFENDialog-castle-bq" type="checkbox" data-color="b" data-side="q" /></td>'+'<td><input id="rpbchessboard-editFENDialog-castle-bk" type="checkbox" data-color="b" data-side="k" /></td>'+Z+tt+'<td><span class="rpbchessboard-editFENDialog-turnFlag uichess-chessboard-turnFlag uichess-chessboard-color-w uichess-chessboard-sized"></span></td>'+'<td><input id="rpbchessboard-editFENDialog-castle-wq" type="checkbox" data-color="w" data-side="q" /></td>'+'<td><input id="rpbchessboard-editFENDialog-castle-wk" type="checkbox" data-color="w" data-side="k" /></td>'+Z+"</tbody></table>"+n+o+e[g].EN_PASSANT_SECTION_TITLE+n+i+'<ul id="rpbchessboard-editFENDialog-enPassantRights">'+"<li>"+'<input id="rpbchessboard-editFENDialog-enPassant-disabled" type="radio" name="enPassant" />'+'<label for="rpbchessboard-editFENDialog-enPassant-disabled">'+e[g].EN_PASSANT_DISABLED_BUTTON_LABEL+C+N+"<li>"+'<input id="rpbchessboard-editFENDialog-enPassant-enabled" type="radio" name="enPassant" />'+'<label for="rpbchessboard-editFENDialog-enPassant-enabled">'+e[g].EN_PASSANT_ENABLED_BUTTON_LABEL.replace("%1$s",'</label><select id="rpbchessboard-editFENDialog-enPassant-column"><option value="a">a</option><option value="b">b</option><option value="c">c</option><option value="d">d</option><option value="e">e</option><option value="f">f</option><option value="g">g</option><option value="h">h</option></select><label for="rpbchessboard-editFENDialog-enPassant-enabled">')+C+N+"</ul>"+n+n+$+e[g].KEYBOARD_SHORTCUTS_TAB_LABEL+W+_+i+"<ul>"+'<li><span class="rpbchessboard-keyboardShortcut">Ctrl+Z</span>'+e[g].UNDO_SHORTCUT_LABEL+N+'<li><span class="rpbchessboard-keyboardShortcut">Ctrl+Y</span>'+e[g].REDO_SHORTCUT_LABEL+N+'<li><span class="rpbchessboard-keyboardShortcut">P</span>'+e[g].ADD_PAWNS_SHORTCUT_LABEL+N+'<li><span class="rpbchessboard-keyboardShortcut">N</span>'+e[g].ADD_KNIGHTS_SHORTCUT_LABEL+N+'<li><span class="rpbchessboard-keyboardShortcut">B</span>'+e[g].ADD_BISHOPS_SHORTCUT_LABEL+N+'<li><span class="rpbchessboard-keyboardShortcut">R</span>'+e[g].ADD_ROOKS_SHORTCUT_LABEL+N+'<li><span class="rpbchessboard-keyboardShortcut">Q</span>'+e[g].ADD_QUEENS_SHORTCUT_LABEL+N+'<li><span class="rpbchessboard-keyboardShortcut">K</span>'+e[g].ADD_KINGS_SHORTCUT_LABEL+N+"</ul>"+n+n+n+n+n+n+n);var O=t(u);O[r]({squareSize:40,interactionMode:q,positionChange:function(e,t){ft||ht(function(e){yt(e)},t[Q],t[G])},flipChange:function(e,n){ft||ht(function(e){O[r](a,M,e),t(v)[j](h,e)},n[Q],n[G])},squareMarkersChange:function(e,t){ft||ht(function(e){O[r](a,m,e)},t[Q],t[G])},arrowMarkersChange:function(e,t){ft||ht(function(e){O[r](a,w,e)},t[Q],t[G])}}),t("#rpbchessboard-editFENDialog-addPiecesSelector input")[d]().each(function(e,n){t(n)[R](function(){gt(t(n).val())})}),t("#rpbchessboard-editFENDialog-addSquareMarkersSelector input")[d]().each(function(e,n){t(n)[R](function(){gt(t(n).val())})}),t("#rpbchessboard-editFENDialog-addArrowMarkersSelector input")[d]().each(function(e,n){t(n)[R](function(){gt(t(n).val())})}),t("#rpbchessboard-editFENDialog-deleteSquareMarkers")[d]()[R](function(){O[r](a,m,"")}),t("#rpbchessboard-editFENDialog-deleteArrowMarkers")[d]()[R](function(){O[r](a,w,"")}),t(S)[d]().each(function(e,n){t(n)[R](function(){O[r]("turn",t(n).val())})}),t(v)[R](function(){O[r](a,M,t(this)[j](h))}),t(l)[d]()[R](function(){dt()}),t(f)[d]()[R](function(){vt()}),t("#rpbchessboard-editFENDialog-startPosition")[d]()[R](function(){yt("start")}),t("#rpbchessboard-editFENDialog-emptyPosition")[d]()[R](function(){yt("empty")}),t("#rpbchessboard-editFENDialog-castleRights input").each(function(e,n){t(n)[R](function(){O[r](b,t(n).data("color"),t(n).data("side"),t(n)[j](h))})});var D=t(c);t("#rpbchessboard-editFENDialog-enPassant-disabled")[R](function(){D[j](H,B),O[r](z,"-")}),t("#rpbchessboard-editFENDialog-enPassant-enabled")[R](function(){D[j](H,A),D.change()}),D.change(function(){O[r](z,D.val())}),t("#rpbchessboard-editFENDialog-accordion").accordion(),t(p)[et]({autoOpen:A,modal:B,dialogClass:"wp-dialog",title:e[g].EDIT_CHESS_DIAGRAM_DIALOG_TITLE,width:750,buttons:[{text:e[g].CANCEL_BUTTON_LABEL,click:function(){t(this)[et]("close")}},{"class":"button-primary",id:"rpbchessboard-editFENDialog-submitButton",text:"",click:function(){t(this)[et]("close"),lt!==L&&(ct[M]=O[r](a,M),ct.csl=O[r](a,m),ct.cal=O[r](a,w),lt(O[r](a,Y),ct))}}]}),t(document).keypress(function(e){if(!t(p)[et]("isOpen"))return;if(!e.altKey&&e.ctrlKey&&!e.metaKey&&!e.shiftKey)e.key==="z"?dt():e.key==="y"&&vt();else if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&"pnbrqk".indexOf(e.key)>=0){var n=t(u)[r](a,x),i="addPieces-w"+e.key,s="addPieces-b"+e.key;gt(n===i?s:n===s?q:i)}})}function Et(e,t,n){if(t>e[U])return-1;var r=e.substr(t).search(n);return r<0?-1:r+t}function St(e,t,n){e=e.substr(0,t);var r=-1;while(B){var i=Et(e,r+1,n);if(i<0)break;r=i}return r}var n="</div>",r="chessboard",i='<div class="rpbchessboard-editFENDialog-sectionContent">',s='<div class="rpbchessboard-buttonRow">',o='<div class="rpbchessboard-editFENDialog-sectionTitle">',u="#rpbchessboard-editFENDialog-chessboard",a="option",f="#rpbchessboard-editFENDialog-redo",l="#rpbchessboard-editFENDialog-undo",c="#rpbchessboard-editFENDialog-enPassant-column",h="checked",p="#rpbchessboard-editFENDialog",d="button",v="#rpbchessboard-editFENDialog-flip",m="squareMarkers",g="i18n",y='<div class="rpbchessboard-jQuery-enableSmoothness">',b="castleRights",w="arrowMarkers",E="</button>",S="#rpbchessboard-editFENDialog-turnSelector input",x="interactionMode",T='<div class="rpbchessboard-deleteIcon"></div>',N="</li>",C="</label>",k='<div class="rpbchessboard-toolbar">',L=null,A=!1,O="disable",M="flip",_="<div>",D="#rpbchessboard-editFENDialog-",P="enable",H="disabled",B=!0,j="prop",F="parseWordPressShortcodeAttributes",I="callback",q="movePieces",R="click",U="length",z="enPassant",W="</h3>",X="refresh",V='">',$="<h3>",J="object",K="showCoordinates",Q="oldValue",G="newValue",Y="position",Z="</tr>",et="dialog",tt="<tr>",nt="options",rt="function",it="squareSize",st="FEN_SHORTCODE";e[g]={EDITOR_BUTTON_LABEL:r,EDIT_CHESS_DIAGRAM_DIALOG_TITLE:"Insert/edit a chess diagram",CANCEL_BUTTON_LABEL:"Cancel",SUBMIT_BUTTON_ADD_LABEL:"Add a new chess diagram",SUBMIT_BUTTON_EDIT_LABEL:"Update the chess diagram",UNDO_TOOLTIP:"Undo the last modification",REDO_TOOLTIP:"Re-do the last modification",FLIP_CHECKBOX_LABEL:"Flip board",STANDARD_POSITIONS_TAB_LABEL:"Standard positions",START_POSITION_TOOLTIP:"Set the initial position",EMPTY_POSITION_TOOLTIP:"Clear the chessboard",ANNOTATIONS_TAB_LABEL:"Annotations",SQUARE_MARKERS_SECTION_TITLE:"Square markers",DELETE_SQUARE_MARKERS_TOOLTIP:"Remove the square markers",ARROW_MARKERS_SECTION_TITLE:"Arrow markers",DELETE_ARROW_MARKERS_TOOLTIP:"Remove the arrow markers",ADVANCED_TAB_LABEL:"Advanced settings",CASTLING_SECTION_TITLE:"Castling rights",EN_PASSANT_SECTION_TITLE:"En passant",EN_PASSANT_DISABLED_BUTTON_LABEL:"Not possible",EN_PASSANT_ENABLED_BUTTON_LABEL:"Possible on column %1$s",KEYBOARD_SHORTCUTS_TAB_LABEL:"Keyboard shortcuts",UNDO_SHORTCUT_LABEL:"undo",REDO_SHORTCUT_LABEL:"redo",ADD_PAWNS_SHORTCUT_LABEL:"add pawns",ADD_KNIGHTS_SHORTCUT_LABEL:"add knights",ADD_BISHOPS_SHORTCUT_LABEL:"add bishops",ADD_ROOKS_SHORTCUT_LABEL:"add rooks",ADD_QUEENS_SHORTCUT_LABEL:"add queens",ADD_KINGS_SHORTCUT_LABEL:"add kings"},e.config={FEN_SHORTCODE:"fen"};var ut=[],at=0,ft=A,lt=L,ct={};e.showEditFENDialog=function(e){wt(),typeof e===rt?(lt=e,ct={},bt("start",B)):typeof e===J&&e!==L?(lt=I in e&&typeof e[I]===rt?e[I]:L,ct=nt in e&&typeof e[nt]===J?e[nt]:{},bt(e.fen,A,ct)):(lt=L,ct={}),t(p)[et]("open")},e[F]=function(e){var t={},n=/([a-zA-Z_0-9]+)=([^ \]]+)(?: |\])/g,r=L,i=function(e,t){return t.toUpperCase()};while((r=n.exec(e))!==L){var s=r[1].toLowerCase().replace(/_([a-z]?)/g,i);t[s]=r[2]}return t},e.serializeFENShortcodeContent=function(t,n){var r=e.config[st],i="["+r;return M in n&&n[M]&&(i+=" flip=true"),"csl"in n&&n.csl!==""&&(i+=" csl="+n.csl),"cal"in n&&n.cal!==""&&(i+=" cal="+n.cal),it in n&&(i+=" square_size="+n[it]),K in n&&(i+=" show_coordinates="+n[K]),i+="]"+t+"[/"+r+"]",i},e.identifyFENShortcodeContent=function(t,n,r){var i=e.config[st],s=3+i[U],o=new RegExp("\\[\\/"+i+"\\]","g"),u=Et(t,Math.max(0,n-s+1),o),a=new RegExp("\\["+i+"[^\\[\\]]*\\]","g"),f=u<0?-1:St(t,u,a);if(f>=0&&u>=0&&f<=n&&r<=u+s){var l=t.substr(f).match(a)[0],c=l[U],h=t.substr(f+c,u-f-c);return{beginShortcode:f,endShortcode:u+s,fen:h,options:e[F](l)}}return L}})(RPBChessboard,jQuery);